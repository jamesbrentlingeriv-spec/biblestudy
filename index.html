<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1d4ed8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Bible Study">
    <title>Bible Study Suite</title>
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body class="bg-slate-50 text-slate-900 font-sans h-screen flex flex-col overflow-hidden">
    <div id="splashScreen" class="fixed inset-0 z-[9999] bg-black flex items-center justify-center">
        <img src="biblestudy.gif" alt="Bible Study intro" class="w-full h-full object-contain">
    </div>

    <div id="appRoot" class="hidden h-screen flex flex-col overflow-hidden">
        <!-- Header -->
        <header class="bg-white border-b border-slate-200 shadow-sm z-20 flex-none">
            <div class="flex items-center justify-between px-4 py-3">
                <div class="flex items-center gap-3">
                    <img src="logo.png" alt="Bible Study Suite logo" class="w-9 h-9 rounded-md object-cover bg-black">
                    <h1 class="text-xl font-bold text-slate-800 hidden sm:block">Bible Study Suite</h1>
                </div>

                <div class="flex items-center gap-3">
                    <select id="translationSelect"
                        class="bg-slate-100 border-none rounded-lg px-3 py-1.5 text-sm font-medium focus:ring-2 focus:ring-indigo-500 outline-none">
                        <option value="kjv">King James Version</option>
                        <option value="asv">American Standard Version</option>
                        <option value="web">World English Bible</option>
                        <option value="ylt">Young's Literal Translation</option>
                        <option value="heb">Hebrew Bible</option>
                        <option value="grc">Greek New Testament (SBLGNT)</option>
                    </select>

                    <button id="newNoteBtn"
                        class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-1.5 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors">
                        <i data-lucide="plus" class="w-4 h-4"></i>
                        <span class="hidden sm:inline">New Note</span>
                    </button>

                    <button id="mobileMenuBtn" class="lg:hidden p-2 hover:bg-slate-100 rounded-lg">
                        <i data-lucide="menu" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-1 flex overflow-hidden">
            <!-- Bible Reader Panel -->
            <aside id="biblePanel"
                class="w-full lg:w-1/3 xl:w-1/4 bg-white border-r border-slate-200 flex flex-col transform transition-transform duration-300 absolute lg:relative z-10 h-full -translate-x-full lg:translate-x-0">
                <div class="p-4 border-b border-slate-200 space-y-3">
                    <div class="flex gap-2">
                        <select id="bookSelect"
                            class="flex-1 bg-slate-50 border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none font-medium">
                            <!-- Populated by JS -->
                        </select>
                        <select id="chapterSelect"
                            class="w-20 bg-slate-50 border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none font-medium">
                            <!-- Populated by JS -->
                        </select>
                    </div>
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search verses (e.g., John 3:16)..."
                            class="w-full bg-slate-50 border border-slate-300 rounded-lg pl-9 pr-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none">
                        <i data-lucide="search" class="w-4 h-4 absolute left-3 top-2.5 text-slate-400"></i>
                    </div>
                </div>

                <div id="bibleContent"
                    class="flex-1 overflow-y-auto p-4 space-y-2 font-serif text-lg leading-relaxed scroll-smooth">
                    <div class="text-center text-slate-500 mt-10">
                        <i data-lucide="book" class="w-12 h-12 mx-auto mb-3 opacity-50"></i>
                        <p>Select a book and chapter to begin reading</p>
                    </div>
                </div>

                <div class="p-4 border-t border-slate-200 bg-slate-50 flex justify-between items-center">
                    <button id="prevChapter"
                        class="p-2 hover:bg-white hover:shadow rounded-lg transition-all text-slate-600">
                        <i data-lucide="chevron-left" class="w-5 h-5"></i>
                    </button>
                    <span id="currentReference" class="text-sm font-medium text-slate-600">Select a chapter</span>
                    <button id="nextChapter"
                        class="p-2 hover:bg-white hover:shadow rounded-lg transition-all text-slate-600">
                        <i data-lucide="chevron-right" class="w-5 h-5"></i>
                    </button>
                </div>
            </aside>

            <!-- Notes Editor Panel -->
            <section class="flex-1 flex flex-col min-w-0 bg-slate-50/50">
                <div class="flex-1 flex flex-col min-h-0">
                    <!-- Note Header -->
                    <div class="bg-white border-b border-slate-200 p-4 flex items-center justify-between">
                        <input type="text" id="noteTitle" placeholder="Untitled Study Note"
                            class="text-xl font-bold bg-transparent border-none outline-none placeholder-slate-400 flex-1 mr-4">
                        <div class="flex items-center gap-2">
                            <span id="folderStatus" class="text-xs text-green-600 hidden font-medium mr-2"></span>
                            <button id="chooseFolderBtn"
                                class="hidden sm:flex items-center gap-2 px-3 py-1.5 bg-slate-50 border border-slate-200 hover:bg-slate-100 rounded-lg text-sm text-slate-600 transition-colors"
                                title="Choose save location">
                                <i data-lucide="folder" class="w-4 h-4"></i>
                                <span>Choose Folder</span>
                            </button>
                            <span id="saveStatus" class="text-xs text-slate-400">Saved</span>
                            <button id="saveNoteBtn"
                                class="p-2 hover:bg-slate-100 rounded-lg text-slate-600 transition-colors"
                                title="Save Note">
                                <i data-lucide="save" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Note Content -->
                    <div class="flex-1 overflow-y-auto bg-white">
                        <div class="h-full flex flex-col">
                            <div class="flex-1 p-6 lg:p-8">
                                <textarea id="noteContent" placeholder="Start your Bible study here... 
                            
Tip: Type verse references like 'John 3:16' or 'Genesis 1:1-3' and they will appear in the sidebar."
                                    class="w-full h-full min-h-[400px] resize-none border-none outline-none text-slate-700 leading-relaxed text-lg font-serif placeholder:text-slate-400 bg-transparent"></textarea>
                            </div>

                            <!-- Audio Recorder Section -->
                            <div class="border-t border-slate-200 p-4 bg-slate-50">
                                <div class="flex items-center gap-4">
                                    <button id="recordBtn"
                                        class="flex items-center gap-2 bg-red-50 hover:bg-red-100 text-red-600 px-4 py-2 rounded-lg font-medium transition-colors">
                                        <i data-lucide="mic" class="w-5 h-5"></i>
                                        <span id="recordBtnText">Record Audio</span>
                                    </button>

                                    <div id="recordingIndicator" class="hidden flex items-center gap-3 flex-1">
                                        <canvas id="audioVisualizer" width="200" height="40"
                                            class="rounded bg-white border border-slate-200"></canvas>
                                        <span id="recordingTimer"
                                            class="font-mono text-red-600 font-medium">00:00</span>
                                        <button id="stopRecordingBtn"
                                            class="p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors">
                                            <i data-lucide="square" class="w-4 h-4 fill-current"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="mt-2 text-[10px] text-black text-center">jamesbrentlinger&trade;</div>

                                <div id="recordingsList" class="mt-4 space-y-2 hidden">
                                    <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">
                                        Sermon
                                        Recordings</h4>
                                    <!-- Recordings populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Context Sidebar -->
            <aside id="contextSidebar"
                class="w-full lg:w-80 xl:w-96 bg-white border-l border-slate-200 flex flex-col transform transition-transform duration-300 absolute lg:relative right-0 z-10 h-full translate-x-full lg:translate-x-0">
                <div class="p-4 border-b border-slate-200 bg-slate-50/50 flex items-center justify-between">
                    <h2 class="font-semibold text-slate-800 flex items-center gap-2">
                        <i data-lucide="bookmark" class="w-4 h-4 text-indigo-600"></i>
                        Referenced Verses
                    </h2>
                    <button id="refreshVersesBtn"
                        class="p-1.5 hover:bg-slate-200 rounded transition-colors text-slate-500">
                        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                    </button>
                </div>

                <div id="versesContainer" class="flex-1 overflow-y-auto p-4 space-y-4">
                    <div class="text-center text-slate-400 py-8">
                        <i data-lucide="quote" class="w-8 h-8 mx-auto mb-2 opacity-50"></i>
                        <p class="text-sm">Verse references typed in your notes will appear here automatically</p>
                    </div>
                </div>

                <div class="p-4 border-t border-slate-200 bg-slate-50">
                    <h3 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3">Saved Notes</h3>
                    <div id="notesList" class="space-y-2 max-h-48 overflow-y-auto mb-4">
                        <div class="text-xs text-slate-400">Your saved notes will appear here</div>
                    </div>

                    <h3 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3">Songs For Study</h3>
                    <div class="space-y-2 mb-4">
                        <input id="songTitleInput" type="text" placeholder="Song title (required)"
                            class="w-full bg-white border border-slate-300 rounded-lg px-3 py-2 text-xs focus:ring-2 focus:ring-indigo-500 outline-none">
                        <textarea id="songLyricsInput" rows="4" placeholder="Type or paste lyrics..."
                            class="w-full bg-white border border-slate-300 rounded-lg px-3 py-2 text-xs focus:ring-2 focus:ring-indigo-500 outline-none resize-y"></textarea>
                        <button id="addSongBtn"
                            class="w-full text-left px-3 py-2 rounded-lg bg-indigo-50 hover:bg-indigo-100 transition-all text-sm text-indigo-700 flex items-center gap-2">
                            <i data-lucide="music-4" class="w-4 h-4"></i>
                            Add Song To Study
                        </button>
                    </div>
                    <div id="songsList" class="space-y-2 max-h-56 overflow-y-auto mb-4">
                        <div class="text-xs text-slate-400">Songs you add will appear here</div>
                    </div>

                    <h3 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3">Study Tools</h3>
                    <div class="space-y-2">
                        <button id="copyVersesBtn"
                            class="w-full text-left px-3 py-2 rounded-lg hover:bg-white hover:shadow-sm transition-all text-sm text-slate-600 flex items-center gap-2">
                            <i data-lucide="copy" class="w-4 h-4"></i>
                            Copy All Verses
                        </button>
                        <button id="clearNotesBtn"
                            class="w-full text-left px-3 py-2 rounded-lg hover:bg-white hover:shadow-sm transition-all text-sm text-red-600 flex items-center gap-2">
                            <i data-lucide="trash-2" class="w-4 h-4"></i>
                            Clear Current Note
                        </button>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Mobile Overlay -->
        <div id="mobileOverlay" class="fixed inset-0 bg-black/50 z-0 hidden lg:hidden"
            onclick="app.closeMobilePanels()">
        </div>

        <!-- Toast Notification -->
        <div id="toast"
            class="fixed bottom-4 right-4 bg-slate-800 text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 transition-transform duration-300 z-50 flex items-center gap-2">
            <i data-lucide="check-circle" class="w-5 h-5 text-green-400"></i>
            <span id="toastMessage">Notification</span>
        </div>
    </div>

    <script src="bible.js"></script>
    <script src="notes.js"></script>
    <script src="audio.js"></script>
    <script src="apps.js"></script>
</body>

</html>